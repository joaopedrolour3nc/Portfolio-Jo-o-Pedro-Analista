<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Blog de Jo√£o Pedro ‚Äî Analista de Dados." />
  <title>Blog ‚Äî Jo√£o Pedro ¬∑ Analista de Dados</title>
  <script>(function(){ var t=localStorage.getItem('theme')||'dark'; document.documentElement.setAttribute('data-theme',t); })();</script>
  <link rel="stylesheet" href="assets/css/styles.css" />
</head>
<body>

  <header class="header" role="banner">
    <div class="container header__inner">
      <a href="index.html" class="header__logo" aria-label="Ir para a Home">
        <span class="header__logo-name">Jo√£o Pedro</span>
        <span class="header__logo-role">Analista de Dados</span>
      </a>
      <button class="nav-toggle" aria-label="Abrir/fechar menu" aria-expanded="false" aria-controls="main-nav">
        <span class="nav-toggle__bar"></span>
        <span class="nav-toggle__bar"></span>
        <span class="nav-toggle__bar"></span>
      </button>
      <nav class="nav" id="main-nav" role="navigation" aria-label="Menu principal">
        <a href="index.html"    class="nav__link">Home</a>
        <a href="projetos.html" class="nav__link">Projetos</a>
        <a href="blog.html"     class="nav__link">Blog</a>
        <a href="contato.html"  class="nav__link">Contato</a>
      </nav>
      <div class="header__actions">
        <button class="theme-toggle" aria-label="Alternar tema" title="Alternar tema">
          <div class="theme-toggle__knob">üåô</div>
        </button>
      </div>
    </div>
  </header>

  <main class="page">

    <!-- LISTA DE POSTS -->
    <div id="blog-list-view">
      <div class="container">
        <div class="projects-header">
          <span class="section__label">// blog</span>
          <h1 class="section__title">Artigos & Insights</h1>
          <p class="section__desc">An√°lises, aprendizados e reflex√µes sobre dados, ferramentas e carreira.</p>
        </div>

        <div id="blog-loading" class="blog-loading">
          <div class="blog-loading__spinner"></div>
          <span>Carregando posts...</span>
        </div>

        <div id="blog-grid" class="blog-grid" style="display:none;"></div>

        <div id="blog-empty" class="empty-state" style="display:none;">
          <div class="empty-state__icon">‚úçÔ∏è</div>
          <div class="empty-state__title">Nenhum post ainda</div>
          <div class="empty-state__desc">Em breve terei conte√∫do por aqui.</div>
        </div>

        <div style="height:80px;"></div>
      </div>
    </div>

    <!-- LEITURA DE POST (p√°gina inteira) -->
    <div id="blog-post-view" style="display:none;">
      <div class="post-page">
        <div class="container">
          <button class="post-page__back" id="post-back-btn">
            ‚Üê Voltar ao blog
          </button>
          <article class="post-article">
            <header class="post-article__header">
              <div class="post-article__meta">
                <span id="post-view-date" class="post-article__date"></span>
                <div id="post-view-tags" class="chips"></div>
              </div>
              <h1 id="post-view-title" class="post-article__title"></h1>
              <div class="post-article__divider"></div>
            </header>
            <div id="post-view-body" class="post-article__body"></div>
          </article>
        </div>
      </div>
    </div>

  </main>

  <footer class="footer" id="blog-footer">
    <div class="container footer__inner">
      <div class="footer__links">
        <a href="https://github.com/joaopedrolour3nc"         target="_blank" rel="noopener" class="footer__link">GitHub</a>
        <a href="https://www.linkedin.com/in/joaopedrolour3nc/" target="_blank" rel="noopener" class="footer__link">LinkedIn</a>
      </div>
      <p class="footer__copy">¬© <span class="footer__year"></span> Jo√£o Pedro ‚Äî Analista de Dados</p>
    </div>
  </footer>

  <!-- Admin modal (injetado pelo main.js) -->

  <script src="assets/js/main.js"></script>
  <script>
    var REPO_OWNER = 'joaopedrolour3nc';
    var REPO_NAME  = 'Portfolio-Jo-o-Pedro-Analista';
    var DATA_FILE  = 'data.json';
    var BRANCH     = 'main';
    var RAW_URL    = 'https://raw.githubusercontent.com/' + REPO_OWNER + '/' + REPO_NAME + '/' + BRANCH + '/' + DATA_FILE + '?nocache=' + Date.now();

    function formatPostDate(iso) {
      var d = new Date(iso);
      var months = ['Janeiro','Fevereiro','Mar√ßo','Abril','Maio','Junho','Julho','Agosto','Setembro','Outubro','Novembro','Dezembro'];
      return d.getDate() + ' de ' + months[d.getMonth()] + ' de ' + d.getFullYear();
    }

    function showPost(post) {
      document.getElementById('blog-list-view').style.display = 'none';
      document.getElementById('blog-footer').style.display = 'none';

      var view = document.getElementById('blog-post-view');
      view.style.display = 'block';

      document.getElementById('post-view-title').textContent = post.title;
      document.getElementById('post-view-date').textContent  = formatPostDate(post.date);
      document.getElementById('post-view-body').innerHTML    = post.content || '';
      document.getElementById('post-view-tags').innerHTML    = (post.tags || [])
        .map(function(t){ return '<span class="chip">' + t + '</span>'; }).join('');

      window.scrollTo({ top: 0, behavior: 'smooth' });
      document.title = post.title + ' ‚Äî Jo√£o Pedro';
    }

    function showList() {
      document.getElementById('blog-post-view').style.display  = 'none';
      document.getElementById('blog-list-view').style.display  = 'block';
      document.getElementById('blog-footer').style.display     = '';
      document.title = 'Blog ‚Äî Jo√£o Pedro ¬∑ Analista de Dados';
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    document.getElementById('post-back-btn').addEventListener('click', showList);

    function renderPosts(posts) {
      document.getElementById('blog-loading').style.display = 'none';

      if (!posts || posts.length === 0) {
        document.getElementById('blog-empty').style.display = 'block';
        return;
      }

      posts.sort(function(a,b){ return new Date(b.date) - new Date(a.date); });

      var grid = document.getElementById('blog-grid');
      grid.style.display = 'grid';
      grid.innerHTML = '';

      posts.forEach(function(post) {
        var tags = (post.tags || []).map(function(t){ return '<span class="chip">' + t + '</span>'; }).join('');
        var plain = (post.content || '').replace(/<[^>]*>/g, '');
        var preview = plain.length > 180 ? plain.substring(0, 180) + '‚Ä¶' : plain;

        var card = document.createElement('article');
        card.className = 'blog-card';
        card.innerHTML =
          '<div class="blog-card__body">' +
            '<div class="blog-card__meta">' +
              '<span class="blog-card__date">' + formatPostDate(post.date) + '</span>' +
            '</div>' +
            '<h2 class="blog-card__title">' + post.title + '</h2>' +
            '<p class="blog-card__preview">' + preview + '</p>' +
            '<div class="chips blog-card__tags">' + tags + '</div>' +
            '<button class="btn btn--outline btn--sm blog-card__btn">Ler artigo ‚Üí</button>' +
          '</div>';

        card.querySelector('.blog-card__btn').addEventListener('click', function(){ showPost(post); });
        card.addEventListener('click', function(e){
          if (!e.target.closest('button')) showPost(post);
        });
        card.style.cursor = 'pointer';

        grid.appendChild(card);
      });
    }

    fetch(RAW_URL)
      .then(function(r){ return r.json(); })
      .then(function(data){ renderPosts(data.posts || []); })
      .catch(function(){ 
        document.getElementById('blog-loading').style.display = 'none';
        document.getElementById('blog-empty').style.display   = 'block';
      });
  </script>

  <!-- ===== ADMIN MODAL ===== -->
  <div id="admin-modal" class="admin-modal" role="dialog" aria-modal="true" style="display:none;">
    <div class="admin-modal__backdrop" id="admin-backdrop"></div>
    <div class="admin-modal__box">
      <button class="admin-modal__close" id="admin-modal-close" aria-label="Fechar">&#x2715;</button>
      <span class="section__label">// acesso restrito</span>
      <h2 class="admin-modal__title">Publicar conte√∫do</h2>

      <div id="admin-login-view">
        <div class="form__group" style="margin-top:20px;">
          <label class="form__label" for="admin-pass-input">Senha</label>
          <input class="form__input" type="password" id="admin-pass-input" placeholder="&#x2022;&#x2022;&#x2022;&#x2022;&#x2022;&#x2022;" autocomplete="off"/>
          <span class="form__error" id="admin-pass-error">Senha incorreta. Tente novamente.</span>
        </div>
        <button class="btn btn--primary" id="admin-pass-btn" style="width:100%;justify-content:center;margin-top:4px;">Entrar &rarr;</button>
      </div>

      <div id="admin-panel-view" style="display:none;">
        <div class="form__group" style="margin-top:20px;">
          <label class="form__label" for="admin-gh-token">Token GitHub <span style="color:var(--text-muted);font-size:0.62rem;">(n√£o salvo)</span></label>
          <input class="form__input" type="password" id="admin-gh-token" placeholder="ghp_xxxxxxxxxxxxxxxxxxxx" autocomplete="off"/>
          <span class="form__error" id="admin-token-error">Token inv√°lido ou sem permiss√£o.</span>
        </div>

        <div class="form__group">
          <label class="form__label">Publicar em</label>
          <div class="admin-dest-tabs">
            <button type="button" class="admin-dest-tab admin-dest-tab--active" data-dest="blog">&#x270D;&#xFE0F; Blog</button>
            <button type="button" class="admin-dest-tab" data-dest="projects">&#x1F4C1; Projetos</button>
            <button type="button" class="admin-dest-tab" data-dest="both">&#x2726; Ambos</button>
          </div>
        </div>

        <div class="form__group">
          <label class="form__label" for="admin-post-title">T√≠tulo *</label>
          <input class="form__input" type="text" id="admin-post-title" placeholder="T√≠tulo"/>
          <span class="form__error" id="admin-title-error">Informe o t√≠tulo.</span>
        </div>
        <div class="form__group">
          <label class="form__label" for="admin-post-tags">Tags <span style="color:var(--text-muted);font-size:0.62rem;">(v√≠rgula)</span></label>
          <input class="form__input" type="text" id="admin-post-tags" placeholder="SQL, Python, Power BI"/>
        </div>

        <div id="admin-project-fields" style="display:none;">
          <div class="form__row">
            <div class="form__group">
              <label class="form__label" for="admin-proj-stack">Stack <span style="color:var(--text-muted);font-size:0.62rem;">(v√≠rgula)</span></label>
              <input class="form__input" type="text" id="admin-proj-stack" placeholder="Python, SQL"/>
            </div>
            <div class="form__group">
              <label class="form__label" for="admin-proj-data">Data</label>
              <input class="form__input" type="text" id="admin-proj-data" placeholder="02-2026"/>
            </div>
          </div>
          <div class="form__row">
            <div class="form__group">
              <label class="form__label" for="admin-proj-github">Link GitHub</label>
              <input class="form__input" type="url" id="admin-proj-github" placeholder="https://github.com/..."/>
            </div>
            <div class="form__group">
              <label class="form__label" for="admin-proj-demo">Link Demo</label>
              <input class="form__input" type="url" id="admin-proj-demo" placeholder="https://..."/>
            </div>
          </div>
          <div class="form__row">
            <div class="form__group">
              <label class="form__label" for="admin-proj-imagem">Imagem <span style="color:var(--text-muted);font-size:0.62rem;">(emoji ou URL)</span></label>
              <input class="form__input" type="text" id="admin-proj-imagem" placeholder="&#x1F4CA; ou https://..."/>
            </div>
            <div class="form__group" style="display:flex;align-items:flex-end;padding-bottom:4px;">
              <label class="admin-check-label">
                <input type="checkbox" id="admin-proj-destaque"/> Marcar como destaque
              </label>
            </div>
          </div>
        </div>

        <div id="admin-desc-field" class="form__group" style="display:none;">
          <label class="form__label" for="admin-proj-desc">Descri√ß√£o curta *</label>
          <textarea class="form__textarea" id="admin-proj-desc" placeholder="Resumo do projeto..." style="min-height:80px;"></textarea>
          <span class="form__error" id="admin-desc-error">Informe a descri√ß√£o.</span>
        </div>

        <div id="admin-editor-field" class="form__group">
          <label class="form__label">Conte√∫do *</label>
          <div class="editor-toolbar editor-toolbar--sm">
            <button type="button" class="editor-btn" data-acmd="bold"><b>B</b></button>
            <button type="button" class="editor-btn" data-acmd="italic"><i>I</i></button>
            <button type="button" class="editor-btn" data-acmd="h2">H2</button>
            <button type="button" class="editor-btn" data-acmd="h3">H3</button>
            <button type="button" class="editor-btn" data-acmd="ul">&bull; Lista</button>
            <button type="button" class="editor-btn" data-acmd="code">&lt;/&gt;</button>
            <button type="button" class="editor-btn" data-acmd="blockquote">&#x275D;</button>
          </div>
          <div id="admin-post-content" class="editor-area editor-area--sm" contenteditable="true" data-placeholder="Escreva o conte√∫do aqui..."></div>
          <span class="form__error" id="admin-content-error">Escreva o conte√∫do.</span>
        </div>

        <div id="admin-publish-status" class="publish-status" style="display:none;margin-bottom:12px;"></div>

        <div class="admin-actions">
          <button class="btn btn--outline btn--sm" id="admin-clear-btn">Limpar</button>
          <button class="btn btn--primary" id="admin-publish-btn">Publicar &rarr;</button>
        </div>

        <div style="margin-top:20px;padding-top:16px;border-top:1px solid var(--border);display:flex;justify-content:space-between;align-items:center;">
          <a href="blog.html" class="btn btn--outline btn--sm">Ver blog &rarr;</a>
          <button class="btn btn--outline btn--sm" id="admin-logout-btn" style="color:var(--text-muted);">Sair</button>
        </div>
      </div>
    </div>
  </div>

</body>
</html>
